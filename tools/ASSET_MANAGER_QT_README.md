# PyQt5 纹理资产管理器

基于 PyQt5 的可视化纹理资产编辑工具，直接集成游戏引擎的统一纹理管理系统。

## 功能特性

### 支持的资产类型
- **精灵 (Sprite)**: 静态图像，支持区域、中心点、碰撞半径编辑
- **动画 (Animation)**: 多帧动画，支持帧序列编辑和实时预览
- **激光 (Laser)**: 三段式激光（头/身/尾），支持16色变体
- **玩家 (Player)**: 玩家配置，包含动画和属性

### 编辑功能
- 可视化绘制精灵区域（矩形选择）
- 拖拽编辑中心点
- 碰撞半径可视化
- 动画实时预览和播放控制
- 缩放和平移视图
- 网格显示辅助对齐

### 引擎集成
- 直接使用 `src/resource/unified_texture.py` 的统一纹理系统
- 可以在发现问题时直接修复引擎代码
- 配置文件格式与引擎完全兼容

## 运行方式

```bash
python tools/asset_manager_qt.py
```

## 依赖
- PyQt5
- pygame-ce（引擎依赖）

## 快捷键

| 快捷键 | 功能 |
|--------|------|
| Ctrl+N | 新建配置 |
| Ctrl+O | 打开配置 |
| Ctrl+S | 保存配置 |
| Ctrl+Shift+S | 另存为 |
| Delete | 删除选中项 |
| Ctrl+D | 复制选中项 |
| = / + | 放大 |
| - | 缩小 |
| F | 适应窗口 |
| 1 | 原始大小 |

## 编辑模式

1. **选择模式**: 默认模式，可以拖拽平移视图，点击选择资产
2. **绘制矩形模式**: 在纹理上绘制矩形来设置精灵/帧的区域
3. **编辑中心点模式**: 点击设置中心点位置

## 配置文件格式

工具支持以下配置文件格式：

### 子弹配置
```json
{
  "texture": "bullet.png",
  "sprites": {
    "bullet_red": {
      "rect": [0, 0, 16, 16],
      "center": [8, 8],
      "radius": 4.0,
      "rotate": true
    }
  },
  "animations": {
    "bullet_anim": {
      "frames": [
        {"rect": [0, 0, 16, 16], "center": [8, 8]},
        {"rect": [16, 0, 16, 16], "center": [8, 8]}
      ],
      "frame_duration": 0.1,
      "loop": true
    }
  }
}
```

### 激光配置
```json
{
  "laser_textures": {
    "laser1": {
      "file": "laser1.png",
      "head_width": 64,
      "body_width": 128,
      "tail_width": 64,
      "row_height": 16,
      "colors": 16
    }
  }
}
```

## 与 Web 版本的区别

相比之前的 Web 版本，PyQt5 版本有以下优势：

1. **直接引擎集成**: 可以直接 import 引擎模块，无需 API 层
2. **更快响应**: 原生 GUI，无网络延迟
3. **更好的调试**: 发现问题可以直接修改引擎代码
4. **离线使用**: 不需要启动服务器

## 开发计划

- [ ] 同步到引擎功能
- [ ] 从引擎重新加载功能
- [ ] 批量编辑功能
- [ ] 自动切割精灵表
- [ ] 颜色变体自动生成
